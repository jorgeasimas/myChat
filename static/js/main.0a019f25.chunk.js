(this["webpackJsonpmy-chat"]=this["webpackJsonpmy-chat"]||[]).push([[0],{28:function(e,t,r){},41:function(e,t,r){},51:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),c=r(24),s=r.n(c),u=(r(41),r(18)),o=(r(28),r(23),r(21),r(22),r(15));o.a.initializeApp({apiKey:"AIzaSyBjtl5dVm-h0Uah1Kwt65--WnZJJRNlamo",authDomain:"my-chat-a7b6d.firebaseapp.com",projectId:"my-chat-a7b6d",storageBucket:"my-chat-a7b6d.appspot.com",messagingSenderId:"1074409928589",appId:"1:1074409928589:web:a9e5e3b5728e8377feefc4",measurementId:"G-NW4RYNZQ6E"});var i=o.a.auth(),p=o.a.firestore(),b=(o.a.analytics(),new o.a.auth.GoogleAuthProvider);b.setCustomParameters({prompt:"select_account"});var j=function(){return i.signInWithPopup(b)},d=(o.a,r(26)),l="GOOGLE_SIGN_IN_START",O="SIGN_IN_SUCCESS",h="SIGN_IN_FAILURE",x="SIGN_OUT_START",f="SIGN_OUT_SUCCESS",v="SIGN_OUT_FAILURE",m=function(e){return{type:h,payload:e}},g=r(7);function y(){return Object(g.jsx)("div",{children:Object(g.jsx)("button",{className:"sign-in",onClick:j,children:"Sign in with Google"})})}function w(){return i.currentUser&&Object(g.jsx)("button",{className:"sign-out",onClick:function(){return i.signOut()},children:"Sign Out"})}var S=r(9),I=r.n(S),U=r(35),N=r(30),k=r(31);function _(e){var t=e.message,r=t.text,n=t.uid,a=t.photoURL,c=n===i.currentUser.uid?"sent":"received";return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"message ".concat(c),children:[Object(g.jsx)("img",{src:a||"https://api.adorable.io/avatars/23/abott@adorable.png"}),Object(g.jsx)("p",{children:r})]})})}var G=function(){var e=Object(n.useRef)(),t=p.collection("messages"),r=t.orderBy("createdAt").limit(25),a=Object(k.a)(r,{idField:"id"}),c=Object(u.a)(a,1)[0],s=Object(n.useState)(""),b=Object(u.a)(s,2),j=b[0],d=b[1],l=function(){var r=Object(U.a)(I.a.mark((function r(n){var a,c,s;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),a=i.currentUser,c=a.uid,s=a.photoURL,r.next=4,t.add({text:j,createdAt:o.a.firestore.FieldValue.serverTimestamp(),uid:c,photoURL:s});case 4:d(""),e.current.scrollIntoView({behavior:"smooth"});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsxs)("main",{children:[c&&c.map((function(e){return Object(g.jsx)(_,{message:e},e.id)})),Object(g.jsx)("span",{ref:e})]}),Object(g.jsxs)("form",{onSubmit:l,children:[Object(g.jsx)("input",{value:j,onChange:function(e){return d(e.target.value)},placeholder:"type your message"}),Object(g.jsx)("button",{type:"submit",disabled:!j,children:"SEND"})]})]})};var A=function(e){e.currentUser;var t=Object(N.a)(i),r=Object(u.a)(t,1)[0];return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)("header",{children:Object(g.jsx)(w,{})}),Object(g.jsx)("section",{children:r?Object(g.jsx)(G,{}):Object(g.jsx)(y,{})})]})},R=r(19),C=(r(50),r(36)),E=r(17),T={currentUser:null,error:null},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(E.a)(Object(E.a)({},e),{},{currentUser:t.payload,error:null});case f:return Object(E.a)(Object(E.a)({},e),{},{currentUser:null,error:null});case h:case v:return Object(E.a)(Object(E.a)({},e),{},{error:t.payload});default:return e}},F=r(13),B=I.a.mark(z),J=I.a.mark(K),P=I.a.mark(Z),W=I.a.mark(M),D=I.a.mark(Q),V=I.a.mark(Y);function z(e,t){var r,n;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(F.b)(e,t);case 3:return r=a.sent,a.next=6,r.get();case 6:return n=a.sent,a.next=9,Object(F.c)((c=Object(E.a)({id:n.id},n.data()),{type:O,payload:c}));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(F.c)(m(a.t0));case 15:case"end":return a.stop()}var c}),B,null,[[0,11]])}function K(){var e,t;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.signInWithPopup(b);case 3:return e=r.sent,t=e.user,console.log("here"),r.next=8,z(t);case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(0),r.next=14,Object(F.c)(m(r.t0));case 14:case"end":return r.stop()}}),J,null,[[0,10]])}function Z(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.signOut();case 3:return e.next=5,Object(F.c)({type:f});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(F.c)((t=e.t0,{type:v,payload:t}));case 11:case"end":return e.stop()}var t}),P,null,[[0,7]])}function M(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("here"),e.next=3,Object(F.d)(l,K);case 3:case"end":return e.stop()}}),W)}function Q(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.d)(x,Z);case 2:case"end":return e.stop()}}),D)}function Y(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.a)([Object(F.b)(M),Object(F.b)(Q)]);case 2:case"end":return e.stop()}}),V)}var q=I.a.mark(H);function H(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.a)([Object(F.b)(Y)]);case 2:case"end":return e.stop()}}),q)}var X=Object(C.a)(),$=[X],ee=Object(R.c)(L,R.a.apply(void 0,$));X.run(H);var te=ee;s.a.render(Object(g.jsx)(d.a,{store:te,children:Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(A,{})})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.0a019f25.chunk.js.map